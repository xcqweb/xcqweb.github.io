(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f90d3e7c"],{"6c05":function(e,t,i){},"71a8":function(e,t,i){"use strict";i.r(t),i("7f7f");var s=i("f499"),o=i.n(s),r=i("15b8"),n=i.n(r),a=i("880a"),l={name:"login",data:function(){var e=this;return{tipUserStatus:!1,tipUser:"",memory:!1,validCode:!1,showPsw:!0,verifyImg:"",loading:!1,formInline:{user:"",password:"",code:""},ruleInline:n()({user:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不少于6位数",trigger:"blur"}],code:[{validator:function(t,i,s){""===i?s(new Error("请输入验证码!")):Object(a.g)({code:i}).then(function(t){t.data.valid?(e.validCode=!0,s()):(e.validCode=!1,e.getCode(),s(new Error("验证码不正确!")))},function(t){e.getCode()})},trigger:"blur"}]})}},watch:{memory:function(e){e?localStorage.setItem("loginUser",o()({user:this.formInline.user,password:this.formInline.password})):localStorage.removeItem("loginUser")},formInline:{handler:function(e){this.memory&&localStorage.setItem("loginUser",o()({user:this.formInline.user,password:this.formInline.password}))},deep:!0}},created:function(){if(this.isNull(localStorage.getItem("loginUser")))this.memory=!1;else{var e=JSON.parse(localStorage.getItem("loginUser"));this.formInline.user=e.user,this.formInline.password=e.password,this.memory=!0}},deactivated:function(){removeEventListener("keyup",this.keyupLogin,!1)},activated:function(){this.getCode(),addEventListener("keyup",this.keyupLogin,!1)},methods:{blurFix:function(){this.chooseTipUser()},appendFix:function(){if(this.formInline.user)if(this.formInline.user.indexOf("@")>=0){this.tipUserStatus=!0;var e=this.formInline.user.indexOf("@"),t=this.formInline.user.substr(0,e);this.tipUser=t+"@xcentz.com"}else this.tipUser=this.formInline.user},chooseTipUser:function(){this.tipUserStatus=!1,this.formInline.user=this.tipUser},keyupLogin:function(e){13==e.keyCode&&this.handleSubmit("formInline")},getCode:function(){var e=this;Object(a.r)().then(function(t){var i=t.data,s=new FileReader;s.readAsDataURL(i),s.onload=function(t){e.verifyImg=t.target.result}})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.loading=!0,Object(a.u)({username:t.formInline.user,password:t.formInline.password,code:t.formInline.code}).then(function(e){200===e.status&&(t.loading=!1,t.userInfo=e.data.user,localStorage.setItem("token",e.data.token),localStorage.setItem("userInfo",o()(e.data.user)),t.$router.push("/home"))},function(e){t.loading=!1}))})}}},c=(i("9add"),i("2877")),p=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"con"},[i("i-form",{ref:"formInline",staticStyle:{width:"360px"},attrs:{model:e.formInline,rules:e.ruleInline}},[i("i-form-item",{staticStyle:{height:"40px",position:"relative"},attrs:{prop:"user"}},[i("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"用户名或邮箱"},on:{"on-blur":e.blurFix,"on-keyup":e.appendFix},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}},[i("i-icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.tipUserStatus,expression:"tipUserStatus"}],staticClass:"ivu-select-dropdown",staticStyle:{width:"100%",position:"absolute","will-change":"top, left","transform-origin":"center top",top:"33px",left:"0px"},attrs:{"x-placement":"bottom-start"}},[i("ul",{staticClass:"ivu-select-dropdown-list"},[i("li",{staticClass:"ivu-select-item",staticStyle:{"text-align":"left"},on:{click:e.chooseTipUser}},[e._v(e._s(e.tipUser))])])])],1),i("i-form-item",{staticStyle:{margin:"36px 0 36px 0"},attrs:{prop:"password"}},[i("i-input",{staticStyle:{width:"100%"},attrs:{type:e.showPsw?"password":"text",size:"large",placeholder:"密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[i("i-icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"}),i("i-icon",{directives:[{name:"show",rawName:"v-show",value:e.showPsw,expression:"showPsw"}],staticStyle:{cursor:"pointer"},attrs:{slot:"append",type:"md-eye"},on:{click:function(t){e.showPsw=!1}},slot:"append"}),i("i-icon",{directives:[{name:"show",rawName:"v-show",value:!e.showPsw,expression:"!showPsw"}],staticStyle:{cursor:"pointer"},attrs:{slot:"append",type:"md-eye-off"},on:{click:function(t){e.showPsw=!0}},slot:"append"})],1)],1),i("i-form-item",{staticStyle:{margin:"36px 0 36px 0"},attrs:{prop:"code"}},[i("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"验证码"},model:{value:e.formInline.code,callback:function(t){e.$set(e.formInline,"code",t)},expression:"formInline.code"}},[i("img",{staticStyle:{cursor:"pointer"},attrs:{slot:"append",src:e.verifyImg,width:"80",height:"20"},on:{click:e.getCode},slot:"append"})])],1),i("p",{staticStyle:{position:"relative",height:"30px"}},[i("i-checkbox",{staticStyle:{position:"absolute",top:"-10px",left:"0"},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}},[e._v("记住密码")])],1),i("i-form-item",[i("i-button",{staticStyle:{width:"360px"},attrs:{type:"primary",size:"large",disabled:!(e.formInline.user&&e.formInline.password&&e.formInline.code&&e.validCode),loading:e.loading},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("登录")])],1)],1)],1)},[],!1,null,"38a26044",null);t.default=p.exports},"9add":function(e,t,i){"use strict";var s=i("6c05");i.n(s).a}}]);